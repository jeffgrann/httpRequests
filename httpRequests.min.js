(({define:typeof define=="function"?define:function(a,b){var c=b.apply(null,a.map(require));Object.keys(c).forEach(function(a){exports[a]=c[a]})}})).define(["http"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return j=function(b,c){this.message=b,this.xhr=c},j.prototype=new Error,i=function(b,c,d){var e=typeof d=="function";this._method=b,this._url=c,this._xhr=new XMLHttpRequest,this._xhr.open(b,c,e),this._callback=d},b=function(b,c){return h("DELETE",b,c)},c=function(b,c){return h("GET",b,c)},d=function(b,c){return h("HEAD",b,c)},f=function(b,c){return h("POST",b,c)},g=function(b,c){return h("PUT",b,c)},h=function(b,c,d){return new i(b,c,d)},i.prototype._isAsynchronous=function(){return typeof this._callback=="function"},i.prototype.send=function(c){var d=typeof this._authenticate=="function",e;typeof this._setHeadersFunction=="function"&&this._setHeadersFunction(this._xhr),this._isAsynchronous()&&(this._xhr.onreadystatechange=function(){this._xhr.readyState===4&&(a.isAuthErrorResponse(this._xhr)&&d?(this._authenticate(this._authenticationInfo),e=h(this._method,this._url,this._callback).setHeaders(this._setHeadersFunction),e.send(c)):this._callback(this._xhr))}),typeof c=="undefined"?this._xhr.send():this._xhr.send(c);if(this._isAsynchronous())return;if(a.isAuthErrorResponse(this._xhr)&&d)return this._authenticate(this._authenticationInfo),e=h(this._method,this._url,this._callback).setHeaders(this._setHeadersFunction),e.send(c);if(a.isErrorResponse(this._xhr))throw new j(a.statusText(this._xhr),this._xhr);return this._xhr},i.prototype.setAuthentication=function(b,c){return this._authenticate=b,this._authenticationInfo=c,this},i.prototype.setHeaders=function(b){return this._setHeadersFunction=b,this},e={},e.del=b,e.get=c,e.head=d,e.post=f,e.put=g,e.request=h,e.RequestError=j,e})